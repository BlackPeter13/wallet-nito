<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Wallet NITO</title>
  <link rel="icon" href="https://raw.githubusercontent.com/biigbang0001/NitoNode-Explorer/refs/heads/main/favicon-192.png"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.1.6/purify.min.js"></script>
  <script src="https://unpkg.com/i18next@23.15.1/i18next.min.js"></script>
  <script src="https://unpkg.com/i18next-http-backend@2.6.1/i18nextHttpBackend.min.js"></script>
  <style>
    body {
      font-family: Arial;
      margin: 20px;
      background: linear-gradient(to bottom, #e6f0fa, #b3d4fc);
      transition: background 0.3s, color 0.3s;
    }
    body.dark-mode {
      background: linear-gradient(to bottom, #2c3e50, #1a252f);
      color: #e0e0e0;
    }
    h1 {
      display: flex;
      justify-content: center;
      align-items: center;
      color: #1e3a8a;
    }
    body.dark-mode h1 {
      color: #64b5f6;
    }
    h1 img {
      width: 40px;
      height: 40px;
      margin-right: 10px;
    }
    .section {
      background: #fff;
      padding: 20px;
      margin: 10px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,.1);
    }
    body.dark-mode .section {
      background: #37474f;
      box-shadow: 0 2px 4px rgba(0,0,0,.3);
    }
    .warning {
      background: #ffcccb;
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
    }
    body.dark-mode .warning {
      background: #e57373;
    }
    button {
      background: #1e40af;
      color: #fff;
      border: 0;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
    }
    body.dark-mode button {
      background: #1976d2;
    }
    button:hover {
      background: #1e3a8a;
    }
    body.dark-mode button:hover {
      background: #1565c0;
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin: 5px 0;
      border: 1px solid #93c5fd;
      border-radius: 5px;
    }
    body.dark-mode input, body.dark-mode select {
      background: #455a64;
      color: #e0e0e0;
      border: 1px solid #90caf9;
    }
    p, li {
      color: #1e3a8a;
      margin: 5px 0;
    }
    body.dark-mode p, body.dark-mode li {
      color: #e0e0e0;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: #f0f8ff;
      padding: 10px;
      margin: 5px 0;
      border-radius: 5px;
    }
    body.dark-mode li {
      background: #546e7a;
    }
    .copy-btn {
      padding: 5px 10px;
      font-size: 14px;
      margin-left: 5px;
    }
    .reveal-btn {
      padding: 5px 10px;
      font-size: 14px;
      margin-left: 5px;
      background: #4b5e40;
    }
    body.dark-mode .reveal-btn {
      background: #6b8e23;
    }
    .tx-hex {
      font-family: monospace;
      font-size: 12px;
      word-break: break-all;
      background: #f0f0f0;
      padding: 10px;
      border-radius: 5px;
      margin-top: 10px;
    }
    body.dark-mode .tx-hex {
      background: #455a64;
    }
    .consolidate-container {
      text-align: center;
      margin-top: 10px;
    }
    .consolidate-button {
      background: transparent;
      border: 1px solid #1e3a8a;
      color: #1e3a8a;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
    }
    body.dark-mode .consolidate-button {
      border: 1px solid #90caf9;
      color: #90caf9;
    }
    .consolidate-button:hover {
      background: #e6f0fa;
    }
    body.dark-mode .consolidate-button:hover {
      background: #37474f;
    }
    .theme-toggle {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #1e40af;
      border: none;
      font-size: 24px;
      cursor: pointer;
      z-index: 1000;
      color: #fff;
      padding: 5px 10px;
      border-radius: 5px;
    }
    body.dark-mode .theme-toggle {
      background: #ffffff;
      color: #1e3a8a;
    }
    .dark-mode .popup {
      background: #37474f;
      color: #e0e0e0;
    }
    .blurred {
      filter: blur(5px);
      user-select: none;
    }
    .blurred-input {
      filter: blur(5px);
    }
    /* Style pour l'encart du compteur */
    .counter-box {
      text-align: center;
      margin: 10px 0;
      padding: 10px;
      background: #f0f8ff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,.1);
      font-size: 16px;
      color: #1e3a8a;
    }
    body.dark-mode .counter-box {
      background: #546e7a;
      color: #e0e0e0;
    }
  </style>
</head>
<body>
  <button class="theme-toggle" id="themeToggle">üåô</button>
  <div class="section">
    <label for="languageSelect" data-i18n="language_label">Langue :</label>
    <select id="languageSelect">
      <option value="fr" data-i18n="languages.fr">Fran√ßais</option>
      <option value="en" data-i18n="languages.en">English</option>
      <option value="de" data-i18n="languages.de">Deutsch</option>
      <option value="es" data-i18n="languages.es">Espa√±ol</option>
      <option value="nl" data-i18n="languages.nl">Nederlands</option>
      <option value="ru" data-i18n="languages.ru">–†—É—Å—Å–∫–∏–π</option>
      <option value="zh" data-i18n="languages.zh">‰∏≠Êñá</option>
    </select>
  </div>
  <h1><img src="https://raw.githubusercontent.com/biigbang0001/NitoNode-Explorer/refs/heads/main/favicon-192.png" alt="">Wallet NITO</h1>

  <!-- Encart pour le compteur -->
  <div class="counter-box">
    <span data-i18n="counter.keys_generated">üîë Cl√©s Nito g√©n√©r√©es :</span> <span id="keyCounter">0</span>
  </div>

  <div class="section">
    <h2 data-i18n="generate_section.title">üéØ G√©n√©ration de cl√© priv√©e Nito</h2>
    <button id="generateButton" data-i18n="generate_section.generate_button">üé≤ G√©n√©rer</button>
    <p><span data-i18n="generate_section.private_key_hex">Cl√© priv√©e (hex) :</span> <span id="privateKeyHex" class="blurred"></span> <button class="copy-btn" id="copyGenHex" data-i18n="generate_section.copy">üìã</button> <button class="reveal-btn" id="revealHex" data-i18n="generate_section.reveal">üëÅÔ∏è R√©v√©ler</button></p>
    <p><span data-i18n="generate_section.private_key_wif">WIF :</span> <span id="privateKey" class="blurred"></span> <button class="copy-btn" id="copyGenWif" data-i18n="generate_section.copy">üìã</button> <button class="reveal-btn" id="revealWif" data-i18n="generate_section.reveal">üëÅÔ∏è R√©v√©ler</button></p>
    <p><span id="generatedAddress"></span></p>
    <p class="warning" data-i18n="generate_section.warning"><span id="inactivityTimer">[10:00]</span> ‚ö†Ô∏è Sauvegardez la cl√© priv√©e imm√©diatement ! Elle sera effac√©e apr√®s 10 minutes d'inactivit√© ou apr√®s un rechargement de la page.</p>
  </div>

  <div class="section">
    <h2 data-i18n="import_section.title">üì• Importer un wallet</h2>
    <div>
      <input id="privateKeyWIF" placeholder="Cl√© priv√©e (WIF ou hex)" data-i18n="[placeholder]import_section.placeholder"/>
      <button class="reveal-btn" id="revealWifInput" data-i18n="generate_section.reveal">üëÅÔ∏è R√©v√©ler</button>
    </div>
    <button id="importWalletButton" data-i18n="import_section.import_button">üì• Importer</button>
    <p><span id="walletAddress"></span></p>
    <p><span data-i18n="import_section.balance">Solde :</span> <span id="walletBalance">0.00000000</span> NITO <button id="refreshBalanceButton" data-i18n="import_section.refresh_button">üîÑ</button></p>
  </div>

  <div class="section">
    <h2 data-i18n="send_section.title">üì§ Envoyer NITO</h2>
    <input id="destinationAddress" placeholder="Adresse destinataire" data-i18n="[placeholder]send_section.destination_placeholder"/>
    <input id="amountNito" type="number" step="0.00000001" placeholder="Montant (NITO)" data-i18n="[placeholder]send_section.amount_placeholder"/>
    <input id="feeNito" type="number" step="0.00000001" placeholder="Frais (NITO)" value="0.0001" data-i18n="[placeholder]send_section.fee_placeholder"/>
    <label data-i18n="send_section.debit_label">Adresse √† d√©biter :</label>
    <select id="debitAddressType">
      <option value="legacy" data-i18n="send_section.legacy_option">Legacy</option>
      <option value="p2sh" data-i18n="send_section.p2sh_option">P2SH</option>
      <option value="bech32" selected data-i18n="send_section.bech32_option">Bech32</option>
    </select>
    <button id="prepareTxButton" data-i18n="send_section.prepare_button">üìù Pr√©parer</button>
    <button id="broadcastTxButton" data-i18n="send_section.broadcast_button">‚úÖ Diffuser transaction</button>
    <button id="cancelTxButton" data-i18n="send_section.cancel_button">‚ùå Annuler</button>
    <div class="consolidate-container">
    </div>
    <div class="tx-hex" style="display:none" id="txHexContainer">
      <p data-i18n="send_section.signed_tx">Transaction sign√©e (hex) :</p>
      <span id="signedTx"></span>
      <button class="copy-btn" id="copyTxHex" data-i18n="send_section.copy_tx">üìã Copier</button>
    </div>
  </div>

  <script type="module" src="./wallet.js"></script>
</body>
</html>
